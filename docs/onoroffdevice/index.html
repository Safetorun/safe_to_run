<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/safe_to_run/blog/rss.xml" title="Safe to run Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/safe_to_run/blog/atom.xml" title="Safe to run Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-158023887-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158023887-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-158023887-2",{anonymize_ip:!0})</script><title data-react-helmet="true">On or off device? | Safe to run</title><meta data-react-helmet="true" property="og:url" content="https://safetorun.github.io/safe_to_run/safe_to_run/docs/onoroffdevice"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="On or off device? | Safe to run"><meta data-react-helmet="true" name="description" content="Off device is currently in beta"><meta data-react-helmet="true" property="og:description" content="Off device is currently in beta"><link data-react-helmet="true" rel="shortcut icon" href="/safe_to_run/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://safetorun.github.io/safe_to_run/safe_to_run/docs/onoroffdevice"><link data-react-helmet="true" rel="alternate" href="https://safetorun.github.io/safe_to_run/safe_to_run/docs/onoroffdevice" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://safetorun.github.io/safe_to_run/safe_to_run/docs/onoroffdevice" hreflang="x-default"><link rel="stylesheet" href="/safe_to_run/assets/css/styles.d5f0bb5e.css">
<link rel="preload" href="/safe_to_run/assets/js/styles.a794bce3.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/runtime~main.eb9fa16e.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/main.9ec03b7e.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/1.28cb4753.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/2.ecdcdd55.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/3.1a5e071e.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/1be78505.b5dd975b.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/52.80e37a14.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/935f2afb.8fa7fe1c.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/17896441.306e20fd.js" as="script">
<link rel="preload" href="/safe_to_run/assets/js/4cd0883b.2a9ad493.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/safe_to_run/"><img src="/safe_to_run/img/safetorun.jpg" alt="Safe to run" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/safe_to_run/img/safetorun.jpg" alt="Safe to run" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Safe to run</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/safe_to_run/docs/">Docs</a><a class="navbar__item navbar__link" href="/safe_to_run/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/safetorun/safe_to_run/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/safe_to_run/"><img src="/safe_to_run/img/safetorun.jpg" alt="Safe to run" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/safe_to_run/img/safetorun.jpg" alt="Safe to run" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Safe to run</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/safe_to_run/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/safe_to_run/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/safetorun/safe_to_run/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">On or off device?</h1></header><div class="markdown"><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Off device is currently in beta</p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="two-modes"></a>Two modes<a class="hash-link" href="#two-modes" title="Direct link to heading">#</a></h1><p>Safe to run offers two modes of operation, it is
possible - recommended even - to use both. </p><p>The &#x27;on device&#x27; mode runs on device, where the checks
happen on the device itself. The &#x27;off-device&#x27; mode works
by sending device information to a remote server, and
the check is done there. </p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pros-and-cons"></a>Pros and cons<a class="hash-link" href="#pros-and-cons" title="Direct link to heading">#</a></h1><p>The on device modes&#x27; main advantage is that the check can happen
almost immediately, and it does not involve a backend system in
order to run. The disadvantage, is that it is easier for an attacker
to see what checks are being performed by your service, and they can
more easily bypass them. A further advantage of the on-device approach
is that your backend can make a decision about whether to run a
command - e.g., your backend might refuse to change a password if it&#x27;s
operating on a rooted phone, or, if you are writing a banking application
you might refuse to send a payment if the phone is considered unsafe</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h1><p>Beyond the setup of the backend (discussed in another section) the difference
is in the configuration. An example configuration for &#x27;On device&#x27; looks like
this</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><div tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">SafeToRun.init(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    configure {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Root beer (detect root)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        rootDetection {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tolerateRoot = false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tolerateBusyBox = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }.error()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Black list certain apps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        blacklistConfiguration {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            +&quot;com.abc.def&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            +packageName</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }.error()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Etc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SafeToRun.isSafeToRun()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Whereas the configuration for off device is done elsewhere, for
the application configuration is done like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><div tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> val str = safeToRunOffDevice(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;https://rygl69bpz0.execute-api.eu-west-1.amazonaws.com/Prod/&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;5bzdwZ8Drs1AIsmJAx0M37bndOeEkwbv6pI5fjx1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .isSafeToRun {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Log.v(&quot;IsSafeToRun&quot;, it.signedResult)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// (Note the callback, if you handle your own threading you can call:)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">str.isSafeToRun()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/safetorun/safe_to_run/edit/master/docs/docs/onoroffdevice.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Daniel Llewellyn, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/safe_to_run/assets/js/styles.a794bce3.js"></script>
<script src="/safe_to_run/assets/js/runtime~main.eb9fa16e.js"></script>
<script src="/safe_to_run/assets/js/main.9ec03b7e.js"></script>
<script src="/safe_to_run/assets/js/1.28cb4753.js"></script>
<script src="/safe_to_run/assets/js/2.ecdcdd55.js"></script>
<script src="/safe_to_run/assets/js/3.1a5e071e.js"></script>
<script src="/safe_to_run/assets/js/1be78505.b5dd975b.js"></script>
<script src="/safe_to_run/assets/js/52.80e37a14.js"></script>
<script src="/safe_to_run/assets/js/935f2afb.8fa7fe1c.js"></script>
<script src="/safe_to_run/assets/js/17896441.306e20fd.js"></script>
<script src="/safe_to_run/assets/js/4cd0883b.2a9ad493.js"></script>
</body>
</html>