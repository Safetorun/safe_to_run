"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6979],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),f=r,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||i;return n?a.createElement(m,o(o({ref:t},u),{},{components:n})):a.createElement(m,o({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},253:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={id:"offdevicesetup",title:"Off device setup",slug:"/offdevicesetup"},s=void 0,c={unversionedId:"offdevice/offdevicesetup",id:"offdevice/offdevicesetup",title:"Off device setup",description:"Off device is currently in beta",source:"@site/docs/offdevice/offdevicesetup.md",sourceDirName:"offdevice",slug:"/offdevicesetup",permalink:"/safe_to_run/docs/offdevicesetup",editUrl:"https://github.com/safetorun/safe_to_run/edit/master/docs/docs/offdevice/offdevicesetup.md",tags:[],version:"current",frontMatter:{id:"offdevicesetup",title:"Off device setup",slug:"/offdevicesetup"}},u=[{value:"Deployment",id:"deployment",children:[{value:"Prerequisites",id:"prerequisites",children:[],level:3},{value:"Install",id:"install",children:[{value:"Click on the &#39;Safe to run backend&#39; and you will see the below",id:"click-on-the-safe-to-run-backend-and-you-will-see-the-below",children:[],level:4},{value:"API Keys on the side, then click &#39;show&#39;",id:"api-keys-on-the-side-then-click-show",children:[],level:4}],level:3},{value:"Select your secret in the list",id:"select-your-secret-in-the-list",children:[{value:"Select to reveal your secret",id:"select-to-reveal-your-secret",children:[],level:4}],level:3}],level:2}],d={toc:u};function p(e){var t=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Off device is currently in beta"))),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you don't intend on running 'Off device' you can skip this section."))),(0,i.kt)("p",null,"The safe to run backend is designed to run using API Gateway and AWS lambda. This makes it incredibly cheap to run and\neasily scalable."),(0,i.kt)("h2",{id:"deployment"},"Deployment"),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"Install and configure the AWS CLI here:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html"},"AWS Install CLI")),(0,i.kt)("h3",{id:"install"},"Install"),(0,i.kt)("p",null,"Clone this repository, and then execute the following commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :SafeToRunBackend:build :SafeToRunBackend:shadowJar\ncp SafeToRunBackend/build/libs/SafeToRunBackend-0.1-all.jar .\nsam package --template-file sam-template.yml --output-template-file sam-template-packages.yml --s3-bucket safe-to-run-lambda-bucket \nsam deploy --template-file sam-template-packages.yml --stack-name sam-safetorun-backend --capabilities CAPABILITY_IAM\n")),(0,i.kt)("p",null,"This should print out the URL, to get the API key, go here:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://eu-west-1.console.aws.amazon.com/apigateway/main/apis"},"https://eu-west-1.console.aws.amazon.com/apigateway/main/apis")),(0,i.kt)("h4",{id:"click-on-the-safe-to-run-backend-and-you-will-see-the-below"},"Click on the 'Safe to run backend' and you will see the below"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"API",src:n(9448).Z})),(0,i.kt)("h4",{id:"api-keys-on-the-side-then-click-show"},"API Keys on the side, then click 'show'"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"API",src:n(1734).Z})),(0,i.kt)("p",null,"Finally, you will need to find the JWT secret that was generated\nto do so, go here:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://eu-west-1.console.aws.amazon.com/secretsmanager/home"},"https://eu-west-1.console.aws.amazon.com/secretsmanager/home")),(0,i.kt)("h3",{id:"select-your-secret-in-the-list"},"Select your secret in the list"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"List of sectes",src:n(7033).Z})),(0,i.kt)("h4",{id:"select-to-reveal-your-secret"},"Select to reveal your secret"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Reveal",src:n(7101).Z})),(0,i.kt)("p",null,"Take a note of this secret, you will need it in order to\nverify your JWT"))}p.isMDXComponent=!0},1734:function(e,t){t.Z="data:image/png;base64,"},9448:function(e,t){t.Z="data:image/png;base64,"},7101:function(e,t){t.Z="data:image/png;base64,"},7033:function(e,t){t.Z="data:image/png;base64,"}}]);